<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sudoku Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .sudoku-grid {
            display: grid;
            grid-template-columns: repeat(9, 3rem);
            gap: 1px;
            background-color: #000;
            padding: 1px;
            width: fit-content;
        }
        .sudoku-cell {
            width: 3rem;
            height: 3rem;
            background-color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        .sudoku-cell input {
            width: 100%;
            height: 100%;
            text-align: center;
            border: none;
            background: transparent;
        }
        .sudoku-cell input:disabled {
            background-color: #e5e7eb;
        }
        .border-right {
            border-right: 2px solid black;
        }
        .border-bottom {
            border-bottom: 2px solid black;
        }
    </style>
</head>
<body class="bg-gray-100 flex flex-col items-center justify-center min-h-screen">
    <h1 class="text-3xl font-bold mb-4">Sudoku Generator</h1>
    <div id="sudoku-grid" class="sudoku-grid"></div>
    <div class="mt-4 flex space-x-4">
        <button id="generate-btn" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Generate New Puzzle</button>
        <button id="solution-btn" class="bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">Show Solution</button>
    </div>
    <script>
        function createGrid(puzzle, solution) {
            const grid = document.getElementById('sudoku-grid');
            grid.innerHTML = '';
            for (let i = 0; i < 9; i++) {
                for (let j = 0; j < 9; j++) {
                    const cell = document.createElement('div');
                    cell.className = 'sudoku-cell';
                    if (j % 3 === 2 && j < 8) cell.classList.add('border-right');
                    if (i % 3 === 2 && i < 8) cell.classList.add('border-bottom');
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.maxLength = 1;
                    input.value = puzzle[i][j] !== 0 ? puzzle[i][j] : '';
                    input.disabled = puzzle[i][j] !== 0;
                    input.dataset.solution = solution[i][j];
                    cell.appendChild(input);
                    grid.appendChild(cell);
                }
            }
        }

        async function fetchPuzzle() {
            const response = await fetch('/generate');
            const data = await response.json();
            createGrid(data.puzzle, data.solution);
        }

        document.getElementById('generate-btn').addEventListener('click', fetchPuzzle);

        document.getElementById('solution-btn').addEventListener('click', () => {
            const inputs = document.querySelectorAll('.sudoku-cell input');
            inputs.forEach(input => {
                input.value = input.dataset.solution;
                input.disabled = true;
            });
        });

        // Load initial puzzle
        fetchPuzzle();
    </script>
</body>
</html>